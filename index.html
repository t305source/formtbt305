<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Form TB â€” Neumorphic</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  
  <!-- MODAL USER INFO -->
  <div id="modalUser" class="modal">
    <div class="modal-content neumorphic">
      <h2>Selamat Datang</h2>

      <label>Nama<sup style="color:red;">*</sup></label>
      <input type="text" id="userNama" placeholder="Nama">

      <label>NIP<sup style="color:red;">*</sup></label>
      <input type="text" id="userNip" placeholder="NIP">

      <label>Toko Asal<sup style="color:red;">*</sup></label>
      <input type="text" id="userAsal" placeholder="Toko Asal">

      <label>Toko Tujuan<sup style="color:red;">*</sup></label>
      <input type="text" id="userTujuan" placeholder="Toko Tujuan">

      <label style="display:none;">Tanggal</label>
      <input style="color:grey; display:none;" type="text" id="userTanggal" readonly>

      <div class="btn-row">
        <button id="btnUserSave"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
  <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/>
  <polyline points="17 21 17 13 7 13 7 21"/>
  <polyline points="7 3 7 8 15 8"/>
</svg>Simpan</button>
        <button id="btnUserClose" class="hidden"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
  <line x1="18" y1="6" x2="6" y2="18"/>
  <line x1="6" y1="6" x2="18" y2="18"/>
</svg>Tutup</button>
      </div>
    </div>
  </div>
  

  <!-- SCANNER MODAL -->
  <div id="modalScanner" class="modal hidden">
    <div class="modal-content neumorphic scanner-box">
      <h3>Scan barcode</h3>
      <video id="scannerVideo" autoplay muted playsinline style="width:100%;border-radius:12px;"></video>
      <div class="btn-row" style="margin-top:8px">
        <button id="btnStopScan">Batal</button>
      </div>
    </div>
  </div>
<div id="focusPulse"></div>
  <!-- VIEW DATA MODAL -->
  <div id="modalView" class="modal hidden">
    <div class="modal-content neumorphic view-box">
      <h3>Data Opname</h3>
      <div id="viewUserInfo" class="muted" style="margin-bottom:8px;font-size:13px;"></div>
      <div id="viewTableContainer" style="max-height:60vh; overflow:auto;"></div>
      <div style="display:grid; grid-template-columns:1fr 1fr" class="btn-row">
        <button style="color:#27ae60;" id="btnExportCsv"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
          <polyline points="14 2 14 8 20 8"/>
        <text x="9" y="16" font-size="7" font-family="monospace">CSV</text>
        </svg>Export CSV</button>
        <button style="color:#25D366;" id="btnShareWa"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 48 48">
  <path fill="#fff" d="M4.868 43.243L7.35 34.89a19.06 19.06 0 01-2.75-9.99C4.6 13.477 13.08 5 23.597 5c5.08 0 9.85 1.98 13.44 5.57a18.85 18.85 0 015.54 13.38c-.01 10.52-8.48 19-19 19-3.29 0-6.53-.84-9.41-2.43l-9.3 2.71z"/>
  <path fill="#40c351" d="M23.6 7.77c-8.76 0-15.86 7.1-15.86 15.86 0 3.18.95 6.27 2.75 8.9l.43.62-1.63 5.66 5.82-1.52.6.36a15.82 15.82 0 008.18 2.26c8.76 0 15.86-7.1 15.86-15.86 0-4.24-1.65-8.22-4.66-11.23a15.77 15.77 0 00-11.19-4.65zm0-2.77c10.52 0 19 8.48 19 19s-8.48 19-19 19c-3.29 0-6.53-.84-9.41-2.43l-9.3 2.71 2.48-8.35A19.06 19.06 0 014.6 24.9C4.6 14.48 13.07 6 23.6 6z"/>
  <path fill="#40c351" d="M34.07 28.75c-.5-.25-2.94-1.46-3.4-1.63-.45-.17-.77-.25-1.1.25-.32.5-1.27 1.63-1.55 1.96-.28.32-.57.37-1.07.12-.5-.25-2.12-.78-4.03-2.47a15.37 15.37 0 01-2.86-3.55c-.3-.52 0-.8.22-1.05.23-.24.52-.62.78-.93.26-.31.35-.52.52-.87.17-.36.08-.68-.03-.94-.12-.25-1.1-2.63-1.51-3.6-.4-.96-.81-.83-1.1-.85l-.94-.02c-.32 0-.84.12-1.28.62-.45.5-1.7 1.66-1.7 4.05 0 2.4 1.74 4.72 1.98 5.05.25.32 3.42 5.22 8.4 7.1 4.98 1.9 5 1.27 5.9 1.19.9-.08 2.94-1.2 3.35-2.39.41-1.19.41-2.2.3-2.39-.12-.2-.45-.32-.95-.57z"/>
</svg>Share ke WA</button>
        <button id="btnShareWaIOS" class="btn neumorphic" style="display:none;">Share WA</button>
        <button style="color:green;" id="btnExportXls"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
  <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
  <polyline points="14 2 14 8 20 8"/>
  <text x="8" y="16" font-size="7" font-family="monospace">XLS</text>
</svg>Export XLS</button>
        <button style="color:#3498db;" id="btnDownloadFoto"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
  <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
  <polyline points="7 10 12 15 17 10"/>
  <line x1="12" y1="15" x2="12" y2="3"/>
</svg>Download Foto</button>
        <button style="color:red;" id="btnHapusOpname"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="3 6 5 6 21 6"/>
          <path d="M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2L5 6"/>
          <path d="M10 11v6"/>
          <path d="M14 11v6"/>
          <path d="M9 6V4a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2"/>
        </svg>Hapus Semua</button>
        <button id="btnCloseView"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
  <line x1="18" y1="6" x2="6" y2="18"/>
  <line x1="6" y1="6" x2="18" y2="18"/>
</svg>Tutup</button>
      </div>
    </div>
  </div>
  
  <!-- modal master -->
  <div id="modalPou" class="modal" style="display:none;">
  <div class="modal-content neumorphic">
    <h3>Menu Master</h3>
    <div id="pouContent" style="min-height:80px; margin-top:10px; display:flex; flex-direction:column; gap:10px;">
      <button style="color:green;" id="btnUpdateMaster">ğŸ”„ Update Master</button>
      <button style="color:red;" id="btnMaster">ğŸ—‘ Hapus Master</button>
    </div>

    <div style="margin-top:15px;">
      <button id="btnClosePou" class="neumorphic">
        Tutup
      </button>
    </div>
  </div>
</div>
  
  <!-- modal hapus master -->
  <div id="modalMaster" class="modal" style="display:none;">
  <div class="modal-content neumorphic">
    <h3>Master Tools</h3>

    <p>Hapus semua data master?</p>
    <p><i style="color:red;">Tindakan ini akan menghapus<br>DATA MASTER!!!</i></p>

    <input 
      type="text"
      id="confirmMasterDelete"
      placeholder="ketik HAPUS untuk melanjutkan"
      class="input-text"
      style="margin-top:10px;"
    >

    <div style="margin-top:15px; display:flex; gap:10px;">
      <button id="btnConfirmDeleteMaster" class="neumorphic" style="color:red;">
        Hapus Master
      </button>
      <button id="btnCloseMaster" class="neumorphic">
        Tutup
      </button>
    </div>

  </div>
</div>

  <!-- modal Finish -->
  <div id="modalOnFinish" class="modal" style="display:none;">
  <div class="modal-content neumorphic">
    <h3>Konfirmasi !!!</h3>

    <p>Anda yakin sudah selesai?</p>
    <p><i style="color:red;">Data Barang dan foto akan di HAPUS!!!</i></p>

    <input 
      type="text"
      id="confirmOnFinish"
      placeholder="ketik SELESAI untuk melanjutkan"
      class="input-text"
      style="margin-top:10px;"
    >

    <div style="margin-top:15px; display:flex; gap:10px;">
      <button id="btnConfirmOnFinish" class="neumorphic" style="color:red;">
        Selesai
      </button>
      <button id="btnCloseOnFinish" class="neumorphic">
        Tutup
      </button>
    </div>

  </div>
</div>
  
  
  <!-- view Foto Modal -->
  <div id="modalFoto" class="modal hidden">
  <div class="modal-content neumorphic" style="text-align:center;">
    <h3>Foto Barang</h3>
    <img id="fotoPreview" src="" style="width:100%; border-radius:12px; margin-bottom:12px;">
    <button id="btnCloseFoto">Tutup</button>
  </div>
</div>

  <!-- HEADER INFO -->
  <div id="headerInfo" class="neumorphic header-box">
    <img class="headerLogo" src="logo.png" alt="TOYSKINGDOM">
    <h2><b>Form Barang TB</b></h2>
    <div id="txtRute" class="big">Dari â€” TB Ke â€”</div>
    <div id="txtPegawai" class="muted">Nama â€” | NIP â€”</div>
    <div id="txtTanggal" class="muted small">Hari â€” | Tanggal â€” | <span id="clock">--:--:--</span></div>
  </div>

  <!-- FORM INPUT SECTION -->
  <div class="form-box neumorphic">

    <label>UPC / Article</label>
    <div class="row">
      <input type="text" id="inputUPC" placeholder="Scan atau ketik UPC / Article">
      <button id="btnScan"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M4 7C4 5.89543 4.89543 5 6 5H8L9 3H15L16 5H18C19.1046 5 20 5.89543 20 7V18C20 19.1046 19.1046 20 18 20H6C4.89543 20 4 19.1046 4 18V7Z" stroke="#333" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
          <circle cx="12" cy="12" r="3" stroke="#333" stroke-width="1.4"/>
        </svg></button>
    </div>

    <label>Article</label>
    <input style="color:grey;" type="text" id="inputArticle" readonly>

    <label>Deskripsi</label>
    <input style="color:grey;" type="text" id="inputDesc" readonly>
    
    <label>Harga</label>
    <input style="color:grey;" type="text" id="inputHarga" readonly>

    <label>Qty</label>
    <input type="number" id="inputQty" min="0">

    <label>Keterangan</label>
    <input type="text" id="inputKet">
    
    <div class="file-wrapper">
        <input
          type="file"
          id="inputFoto"
          accept="image/*"
          capture="environment"
          class="file-real"
        >
        <button type="button" class="neumorphic file-btn"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M4 7C4 5.89543 4.89543 5 6 5H8L9 3H15L16 5H18C19.1046 5 20 5.89543 20 7V18C20 19.1046 19.1046 20 18 20H6C4.89543 20 4 19.1046 4 18V7Z" stroke="#333" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
          <circle cx="12" cy="12" r="3" stroke="#333" stroke-width="1.4"/>
        </svg>Ambil Foto Barang</button>
    </div>
    <div id="fotoHintBox" class="foto-hint-box hidden">
      <span id="fotoHint">Foto berhasil diambil âœ”ï¸</span>
      <button id="btnHapusFoto" class="hapus-foto-btn">ğŸ—‘ï¸</button>
    </div>

    <div style="display:grid; grid-template-columns:1fr 1fr;" class="btn-row">
      <button id="btnSave"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
  <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/>
  <polyline points="17 21 17 13 7 13 7 21"/>
  <polyline points="7 3 7 8 15 8"/>
</svg>Simpan</button>
      <input id="fileMaster" type="file"  class="hidden">
      <button style="color:#2c3e50;" id="btnPou"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
  <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/>
  <polyline points="3.3 7.7 12 12 20.7 7.7"/>
  <line x1="12" y1="22" x2="12" y2="12"/>
</svg>Prodmast</button>
      <button id="btnView"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
  <rect x="3" y="4" width="18" height="16" rx="2" ry="2"/>
  <line x1="3" y1="10" x2="21" y2="10"/>
  <line x1="9" y1="4" x2="9" y2="20"/>
  <line x1="15" y1="4" x2="15" y2="20"/>
</svg>Lihat Data</button>
      <button id="btnFinish"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
  <polyline points="5 13 9 17 19 7"/>
</svg>Selesai</button>
  </div>
</div>
  
  <!-- LoadingOverlay -->
  <div id="loadingOverlay" class="loading-overlay hidden">
  <div class="loading-box">
    <div class="spinner"></div>
    <div class="loading-text">Memuat data... <br>Mohon Tunggu</div>
  </div>
</div>
  
  <!-- konfirmasi overlay -->
  <div id="confirmOverlay" class="modal" style="display:none;">
  <div class="modal-content neumorphic" style="max-width:320px;">
    <p id="confirmMessage" style="margin-bottom:20px;">Apakah Anda yakin?</p>

    <div style="display:flex; gap:10px; justify-content:center;">
      <button id="confirmYes" class="neumorphic" style="color:#e74c3c;">Ya</button>
      <button id="confirmNo"  class="neumorphic">Tidak</button>
      </div>
    </div>
    </div>
    
    <!-- Footer Running Text -->
    <footer class="footer-run">
      <div id="runWrapper">
    <div id="runText"><img class="runImage" src="logo.png" alt="TOYSKINGDOM" > Menjadi pusat keceriaan, inspirasi, dan imajinasi yang menciptakan kebahagiaan dengan penuh senyuman. || Menyediakan beragam produk mainan yang edukatif dan inspiratif untuk mendukung bakat dan minat anak-anak (multiple intelligence). Memberikan pelayanan yang optimal, ramah, dan bersahabat dari staf terlatih untuk meningkatkan pengalaman belanja dan kepuasan pelanggan. Mewujudkan pengalaman belanja yang nyaman dan menyenangkan bagi pelanggan.|| Â© 2025 | Form TB by <i>mrpou30</i></div>
  </div>
</footer>
  
  <!-- library Papaparse -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
  <!-- Library export xls-->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  <!-- Library Zip -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <!-- library zXing Zebra -->
  <script src="https://unpkg.com/@zxing/library@latest"></script>
  <!-- Script connection -->
  <script src="app.js"></script>
  
</body>
</html>